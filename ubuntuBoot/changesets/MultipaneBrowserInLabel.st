"
   Licensed under the Squeak License (the ''License''); you may not use this file except in compliance with the License.  You may obtain a copy of the License at  http://www.squeak.org/SqueakLicense/
"!
'From Squeak3.9 of 7 November 2006 [latest update: #7067] on 29 May 2007 at 3:25:38 pm'!"Change Set:		MultipaneBrowserDate:			30 March 2007Author:			Eliot MirandaQuick multipane browser hack."Preferences	addPreference: #multiPaneBrowsers	categories: #('browsing')	default: false 	balloonHelp: 'Browsers provide multiple panes,\so that multiple browsers share a single window' withCRs!!ParagraphEditor methodsFor: 'menu messages' stamp: 'eem 4/3/2007 13:47'!saveContentsInFile	"Save the receiver's contents string to a file, prompting the user for a file-name.  Suggest a reasonable file-name."	| fileName stringToSave parentWindow labelToUse suggestedName lastIndex |	(stringToSave := paragraph text string) isEmpty ifTrue:		[^ self inform: 'nothing to save.'].	parentWindow := self model dependents						detect: [:dep | dep isKindOf: SystemWindow orOf: StandardSystemView]						ifNone: [nil].	labelToUse := parentWindow ifNil: ['Untitled'] ifNotNil: [parentWindow label].	suggestedName := nil.	#(('Decompressed contents of: '		'.gz')) do:  "can add more here..."		[:leaderTrailer |			(labelToUse beginsWith: leaderTrailer first) ifTrue:				[suggestedName := labelToUse copyFrom: leaderTrailer first size + 1 to: labelToUse size.				(labelToUse endsWith: leaderTrailer last)					ifTrue:						[suggestedName := suggestedName copyFrom: 1 to: suggestedName size - leaderTrailer last size]					ifFalse:						[lastIndex := suggestedName lastIndexOf: $. ifAbsent: [0].						(lastIndex = 0 or: [lastIndex = 1]) ifFalse:							[suggestedName := suggestedName copyFrom: 1 to: lastIndex - 1]]]].	(suggestedName isNil and: [parentWindow notNil]) ifTrue:		[suggestedName := parentWindow valueOfProperty: #workspaceFileName].	suggestedName ifNil:		[suggestedName := labelToUse, '.text'].				fileName := UIManager default					request: 'File name?' translated					initialAnswer: suggestedName.	fileName isEmptyOrNil ifFalse:		[(FileStream newFileNamed: fileName) nextPutAll: stringToSave; close.		 parentWindow notNil ifTrue:		 	[parentWindow setProperty: #workspaceFileName toValue: fileName]]! !"Postscript:Once filed-in it should be safe to enable the multipane preference:"Preferences togglePreference: #multiPaneBrowsers!